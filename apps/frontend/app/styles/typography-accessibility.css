/* 
 * CastMatch Typography System - Hindi/English Accessibility
 * WCAG AAA Compliant Typography for Mumbai Launch
 * Multi-language Support with Screen Reader Optimization
 */

/* === FONT LOADING AND FALLBACKS === */

/* Import Noto Sans Devanagari for Hindi Support */
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@300;400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

/* === FONT STACKS === */
:root {
  /* PRIMARY FONT STACK (Hindi + English) */
  --font-primary: 'Noto Sans Devanagari', 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 
                  'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  
  /* ENGLISH-ONLY FONT STACK (Performance) */
  --font-english: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 
                  'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  
  /* HINDI-PRIORITY FONT STACK */
  --font-hindi: 'Noto Sans Devanagari', 'Mangal', 'Kokila', 
                system-ui, sans-serif;
  
  /* MONOSPACE FONT STACK */
  --font-mono: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', 
               'Source Code Pro', monospace;
}

/* === TYPOGRAPHY SCALE (ACCESSIBLE SIZES) === */
:root {
  /* BASE SIZES (16px = 1rem minimum for accessibility) */
  --text-xs: 0.875rem;    /* 14px - Use sparingly */
  --text-sm: 1rem;        /* 16px - Body text minimum */
  --text-base: 1.125rem;  /* 18px - Comfortable reading */
  --text-lg: 1.25rem;     /* 20px - Large text */
  --text-xl: 1.375rem;    /* 22px - Headings */
  --text-2xl: 1.5rem;     /* 24px - Subheadings */
  --text-3xl: 1.875rem;   /* 30px - Major headings */
  --text-4xl: 2.25rem;    /* 36px - Display headings */
  --text-5xl: 3rem;       /* 48px - Hero text */
  --text-6xl: 4rem;       /* 64px - Large display */
  
  /* LINE HEIGHTS (Optimized for Hindi text) */
  --leading-none: 1;
  --leading-tight: 1.25;
  --leading-snug: 1.375;
  --leading-normal: 1.5;
  --leading-relaxed: 1.625;    /* Better for Hindi */
  --leading-loose: 1.75;       /* Hindi paragraph text */
  --leading-extra-loose: 1.875; /* Long-form Hindi content */
  
  /* LETTER SPACING */
  --tracking-tighter: -0.05em;
  --tracking-tight: -0.025em;
  --tracking-normal: 0;
  --tracking-wide: 0.025em;
  --tracking-wider: 0.05em;
  --tracking-widest: 0.1em;
  
  /* FONT WEIGHTS */
  --font-light: 300;
  --font-normal: 400;
  --font-medium: 500;
  --font-semibold: 600;
  --font-bold: 700;
}

/* === ACCESSIBILITY-FIRST TEXT STYLES === */

/* Base Text Styles */
body {
  font-family: var(--font-primary);
  font-size: var(--text-base);
  line-height: var(--leading-normal);
  font-weight: var(--font-normal);
  color: var(--text-primary);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeReadability;
}

/* Heading Hierarchy (WCAG Compliant) */
h1, .text-h1 {
  font-family: var(--font-primary);
  font-size: var(--text-4xl);
  line-height: var(--leading-tight);
  font-weight: var(--font-bold);
  color: var(--text-primary);
  margin-bottom: 1rem;
  letter-spacing: var(--tracking-tight);
}

h2, .text-h2 {
  font-family: var(--font-primary);
  font-size: var(--text-3xl);
  line-height: var(--leading-snug);
  font-weight: var(--font-semibold);
  color: var(--text-primary);
  margin-bottom: 0.875rem;
  letter-spacing: var(--tracking-tight);
}

h3, .text-h3 {
  font-family: var(--font-primary);
  font-size: var(--text-2xl);
  line-height: var(--leading-snug);
  font-weight: var(--font-semibold);
  color: var(--text-primary);
  margin-bottom: 0.75rem;
  letter-spacing: var(--tracking-normal);
}

h4, .text-h4 {
  font-family: var(--font-primary);
  font-size: var(--text-xl);
  line-height: var(--leading-snug);
  font-weight: var(--font-medium);
  color: var(--text-primary);
  margin-bottom: 0.625rem;
  letter-spacing: var(--tracking-normal);
}

h5, .text-h5 {
  font-family: var(--font-primary);
  font-size: var(--text-lg);
  line-height: var(--leading-normal);
  font-weight: var(--font-medium);
  color: var(--text-primary);
  margin-bottom: 0.5rem;
  letter-spacing: var(--tracking-normal);
}

h6, .text-h6 {
  font-family: var(--font-primary);
  font-size: var(--text-base);
  line-height: var(--leading-normal);
  font-weight: var(--font-medium);
  color: var(--text-primary);
  margin-bottom: 0.5rem;
  letter-spacing: var(--tracking-normal);
}

/* Body Text Styles */
p, .text-body {
  font-family: var(--font-primary);
  font-size: var(--text-base);
  line-height: var(--leading-relaxed);
  font-weight: var(--font-normal);
  color: var(--text-primary);
  margin-bottom: 1rem;
}

.text-body-large {
  font-size: var(--text-lg);
  line-height: var(--leading-relaxed);
}

.text-body-small {
  font-size: var(--text-sm);
  line-height: var(--leading-normal);
  color: var(--text-secondary);
}

/* Caption and Label Styles */
.text-caption {
  font-family: var(--font-primary);
  font-size: var(--text-sm);
  line-height: var(--leading-normal);
  font-weight: var(--font-normal);
  color: var(--text-tertiary);
}

.text-label {
  font-family: var(--font-primary);
  font-size: var(--text-sm);
  line-height: var(--leading-normal);
  font-weight: var(--font-medium);
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: var(--tracking-wide);
}

/* Interactive Text */
.text-link {
  color: var(--text-link);
  text-decoration: underline;
  text-underline-offset: 0.2em;
  text-decoration-thickness: 1px;
  transition: color 0.2s ease-in-out;
}

.text-link:hover {
  color: var(--text-link-hover, var(--text-link));
  text-decoration-thickness: 2px;
}

.text-link:visited {
  color: var(--text-visited);
}

/* === HINDI-SPECIFIC OPTIMIZATIONS === */

/* Hindi Text Container */
.text-hindi {
  font-family: var(--font-hindi);
  line-height: var(--leading-loose);  /* More space for Devanagari */
  font-feature-settings: "liga" 1, "clig" 1;  /* Better ligatures */
  text-rendering: optimizeQuality;
}

/* Hindi Headings */
.text-hindi h1, .text-hindi .text-h1 {
  line-height: var(--leading-snug);
  font-size: calc(var(--text-4xl) * 0.9); /* Slightly smaller for Hindi */
}

.text-hindi h2, .text-hindi .text-h2 {
  line-height: var(--leading-normal);
  font-size: calc(var(--text-3xl) * 0.9);
}

.text-hindi h3, .text-hindi .text-h3 {
  line-height: var(--leading-normal);
  font-size: calc(var(--text-2xl) * 0.9);
}

/* Hindi Paragraphs */
.text-hindi p, .text-hindi .text-body {
  line-height: var(--leading-extra-loose);
  word-spacing: 0.1em;
}

/* === CONTENT ACCESSIBILITY CLASSES === */

/* Reading Level Optimization (Grade 8 Target) */
.text-accessible {
  font-size: var(--text-base);
  line-height: var(--leading-relaxed);
  max-width: 65ch; /* Optimal line length for readability */
  margin: 0 auto;
}

.text-accessible-large {
  font-size: var(--text-lg);
  line-height: var(--leading-relaxed);
  max-width: 60ch;
  margin: 0 auto;
}

/* Screen Reader Optimizations */
.sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

.sr-only-focusable:focus {
  position: static !important;
  width: auto !important;
  height: auto !important;
  padding: 0.5rem 1rem !important;
  margin: 0 !important;
  overflow: visible !important;
  clip: auto !important;
  white-space: normal !important;
  border: 2px solid var(--border-focus) !important;
  border-radius: 0.25rem !important;
  background: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

/* Text with Pronunciation Markup for Screen Readers */
.text-pronunciation {
  speak: spell-out;
}

/* Long Text Optimization */
.text-long-form {
  font-size: var(--text-base);
  line-height: var(--leading-loose);
  max-width: 70ch;
  margin: 0 auto;
  text-align: left;
  word-spacing: 0.05em;
}

.text-long-form.text-hindi {
  line-height: var(--leading-extra-loose);
  word-spacing: 0.1em;
}

/* === RESPONSIVE TYPOGRAPHY === */

/* Mobile Optimizations */
@media (max-width: 768px) {
  :root {
    --text-xs: 0.875rem;   /* 14px */
    --text-sm: 1rem;       /* 16px - Prevents iOS zoom */
    --text-base: 1.125rem; /* 18px - Better mobile readability */
    --text-lg: 1.25rem;    /* 20px */
    --text-xl: 1.375rem;   /* 22px */
    --text-2xl: 1.5rem;    /* 24px */
    --text-3xl: 1.75rem;   /* 28px */
    --text-4xl: 2rem;      /* 32px */
    --text-5xl: 2.5rem;    /* 40px */
  }
  
  /* Increase line heights for mobile */
  h1, .text-h1 { line-height: var(--leading-normal); }
  h2, .text-h2 { line-height: var(--leading-normal); }
  h3, .text-h3 { line-height: var(--leading-normal); }
  
  p, .text-body {
    line-height: var(--leading-loose);
  }
  
  .text-hindi p, .text-hindi .text-body {
    line-height: 1.875; /* Extra space for Hindi on mobile */
  }
  
  /* Prevent iOS zoom on inputs */
  input, textarea, select {
    font-size: var(--text-sm) !important;
  }
}

/* Tablet Optimizations */
@media (max-width: 1024px) and (min-width: 769px) {
  :root {
    --text-base: 1.0625rem; /* 17px */
    --text-lg: 1.1875rem;   /* 19px */
  }
}

/* === FONT PERFORMANCE OPTIMIZATIONS === */

/* Preload critical fonts */
link[rel="preload"][as="font"] {
  font-display: swap;
}

/* Font loading optimization */
@supports (font-display: optional) {
  @font-face {
    font-family: 'Noto Sans Devanagari';
    font-display: optional;
  }
  
  @font-face {
    font-family: 'Inter';
    font-display: optional;
  }
}

/* Fallback for when fonts fail to load */
.font-fallback {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
}

/* === ACCESSIBILITY UTILITIES === */

/* High contrast text */
@media (prefers-contrast: high) {
  body {
    color: var(--text-primary);
  }
  
  .text-secondary {
    color: var(--text-primary);
  }
  
  .text-tertiary {
    color: var(--text-secondary);
  }
}

/* Increased motion for better readability */
@media (prefers-reduced-motion: reduce) {
  .text-link {
    transition: none;
  }
}

/* Print styles for text */
@media print {
  body {
    font-family: 'Times New Roman', Times, serif;
    font-size: 12pt;
    line-height: 1.4;
    color: #000000 !important;
  }
  
  h1, h2, h3, h4, h5, h6 {
    color: #000000 !important;
    page-break-after: avoid;
  }
  
  p {
    orphans: 3;
    widows: 3;
  }
  
  .text-hindi {
    font-family: 'Noto Sans Devanagari', serif;
  }
}

/* === CONTENT STRUCTURE ACCESSIBILITY === */

/* Article and section styling */
article, section {
  margin-bottom: 2rem;
}

/* List styling for screen readers */
ul, ol {
  padding-left: 1.5rem;
  margin-bottom: 1rem;
}

li {
  margin-bottom: 0.25rem;
  line-height: var(--leading-relaxed);
}

/* Definition lists */
dl {
  margin-bottom: 1rem;
}

dt {
  font-weight: var(--font-semibold);
  color: var(--text-primary);
  margin-bottom: 0.25rem;
}

dd {
  margin-left: 1rem;
  margin-bottom: 0.75rem;
  color: var(--text-secondary);
}

/* Blockquotes */
blockquote {
  border-left: 4px solid var(--border-accent);
  padding-left: 1rem;
  margin: 1.5rem 0;
  font-style: italic;
  color: var(--text-secondary);
}

blockquote p {
  margin-bottom: 0.5rem;
}

/* Code and pre formatting */
code {
  font-family: var(--font-mono);
  font-size: 0.875em;
  padding: 0.125rem 0.25rem;
  background-color: var(--bg-tertiary);
  border-radius: 0.25rem;
  color: var(--text-primary);
}

pre {
  font-family: var(--font-mono);
  font-size: 0.875rem;
  line-height: var(--leading-relaxed);
  padding: 1rem;
  background-color: var(--bg-tertiary);
  border-radius: 0.5rem;
  overflow-x: auto;
  margin-bottom: 1rem;
}

pre code {
  padding: 0;
  background: none;
}

/* Mark/highlight text */
mark {
  background-color: rgba(255, 215, 0, 0.3);
  color: var(--text-primary);
  padding: 0.125rem 0.25rem;
  border-radius: 0.125rem;
}

/* Abbreviations */
abbr[title] {
  text-decoration: underline dotted;
  cursor: help;
  border-bottom: none;
}

/* === LANGUAGE-SPECIFIC UTILITIES === */

/* Language attribute styling */
[lang="hi"], .lang-hindi {
  font-family: var(--font-hindi);
  line-height: var(--leading-loose);
}

[lang="en"], .lang-english {
  font-family: var(--font-english);
  line-height: var(--leading-relaxed);
}

/* Mixed language content */
.mixed-lang p {
  line-height: var(--leading-loose); /* Accommodate both languages */
}

/* Language direction support (future RTL) */
[dir="rtl"] {
  text-align: right;
}

[dir="ltr"] {
  text-align: left;
}

/* === TEXT SPACING AND RHYTHM === */

/* Consistent spacing between elements */
.text-flow > * + * {
  margin-top: 1rem;
}

.text-flow h1 + p,
.text-flow h2 + p,
.text-flow h3 + p,
.text-flow h4 + p,
.text-flow h5 + p,
.text-flow h6 + p {
  margin-top: 0.5rem;
}

/* Micro-typography adjustments */
.text-fine-tune {
  text-rendering: optimizeLegibility;
  -webkit-font-feature-settings: "kern" 1, "liga" 1, "clig" 1, "calt" 1;
  font-feature-settings: "kern" 1, "liga" 1, "clig" 1, "calt" 1;
}